## Керування процесами-транзакціями в базах даних

### 2.1 Теоретичне завдання зі створення історій виконання транзакцій

#### 2.1.1 Створити історію квазіпаралельного успішного виконання транзакцій для
протоколу 1-го ступеня блокування.
TAsk:
T1= W[M] W[K] C1
T2= R[M] R[K] W[M] C2
T3= W[B] R[K] W[M] C3

H1(T1,T2,T3)=X1[M], W1[M], R2[M], X3[B], W3[B], X1[K], W1[K], C1, U1 R1[K], R1[K], X2[M] W2[M], X3[M]-wait, C2, U2, X3[M], W2[M], C3, U3.
Описати таблицю блокування транзакцій до моменту першої фіксації змін однієї з
транзакцій у вигляді масиву на мові програмування С.

:char* lock_table[][3] = {{ "M", "X1", "" },{ "B", "X3", "" },{ "K", "X1", "" }};
#### 2.1.2 Для створеної історії з попереднього завдання визначити наявність Deadlock-
стану транзакції, створивши граф очікування транзакцій, та зробити відповідний висновок.

Представити граф у вигляді масиву на мові програмування С.

int wait[ ][ ] = { {3, 2} };
Висновок:немає циклу dead_lock стану теж немає 

#### 2.1.3 Створити історію квазіпаралельного успішного виконання транзакцій для
протоколу 2-го ступеня блокування.
Описати таблицю блокування транзакцій до моменту першої фіксації змін однієї з
транзакцій у вигляді масиву на мові програмування С.


H2(T1,T2,T3)= X1[M], W1[M], S2[M], X3[B], W3[B], X1[K], W1[K], C1, U1, S2[K]-wait, S3[K]-wait, X2[M]-wait, X3[M]-wait, U2[M], X2[M], W[M], U2[k], R[K] C2, S3[K], R[K], X3[M], W[M],
, C3
:char* lock_table[][3] = {{ "M", "X1", "S2" },{ "B", "X3", "" },{ "K", "X1", "S2,S3" },{ "M", "s2", "X2" }};


2.1.4

int wait[ ][ ] = { {2, 1},{2 , 1},{3,1},{2,2} };
Висновок:dead_lock не існує .


### 2.2 Налаштування бази даних

![2 2 1](https://github.com/oleksandrblazhko/ai222-lyaskovskij/assets/127392217/ee1c2295-f57e-49cc-b3ab-83a68deb6e23)

рис 1 до завдання 2.2.1 Встановити з’єднання з БД, назва якої співпадає з іменем вашого користувача
в ОС Linux, використовуючи користувача СКБД за таким же іменем.

![2 2 2](https://github.com/oleksandrblazhko/ai222-lyaskovskij/assets/127392217/7584efc6-4d62-432b-acd3-e751aac940af)

рис 2 до завдання 2.2.2 Виконати команди отримання імені поточного користувача СКБД та назви БД.

![2 2 3](https://github.com/oleksandrblazhko/ai222-lyaskovskij/assets/127392217/6d15e03b-3d73-4eb4-9566-f30ec7c1b0f9)

рис 3 до завдання 2.2.3 У відповідності із варіантом з таблиці 16 створити реляційну таблицю.

![2 2 4](https://github.com/oleksandrblazhko/ai222-lyaskovskij/assets/127392217/6a45dea5-5a48-4009-8138-4a2e07b043b6)

рис 4 до завдання 2.2.4 У відповідності із варіантом з таблиці 16 додати рядок в реляційну таблицю.

![2 2 5](https://github.com/oleksandrblazhko/ai222-lyaskovskij/assets/127392217/73cd61e0-f8c0-442a-b6ba-87e5d6e7a511)

рис 5 до завдання 2.2.5 Створити ще одну операцію внесення рядка в таблицю, який буде відрізнятися
значеннями всіх змінних (стовпчиків) від прикладу з варіанту, а одна із змінних повинна
враховувати значення із транслітерацією вашого прізвища.

![2 2 6](https://github.com/oleksandrblazhko/ai222-lyaskovskij/assets/127392217/d4dc4847-44ce-4dfe-aa37-ba3ccb0e88c6)

рис 6 до завдання 2.2.6 Переглянути зміст таблиці, враховуючи всі стовпчики всіх рядків таблиці.

### 2.3 Керування квазіпаралельним виконанням транзакцій з використанням команд блокування

![2 3 1](https://github.com/oleksandrblazhko/ai222-lyaskovskij/assets/127392217/273d5646-e0d9-44b2-a8c5-46007989680f)

![2 3 1(1)](https://github.com/oleksandrblazhko/ai222-lyaskovskij/assets/127392217/4f5d0bfc-3a4e-47d6-bee4-4d628002f913)

![2 3 1(2)](https://github.com/oleksandrblazhko/ai222-lyaskovskij/assets/127392217/9598be72-7124-4e66-b801-c1c6e088b9f5)

Рис. 7 - фрагмент екрану з рiшення "2.3.1 Створити файл з назвою за шаблоном «ваше прізвище_transaction_lock_1.sql»,
наприклад, blazhko_transaction_lock_1.sql, та додати до нього операції двох транзакцій,
кожна з яких повинна включати наступні операції:
- операція блокування для протоколу 1-го ступеня блокування;
- операція читання всіх стовпчиків першого рядку таблиці;
- операція зміни значення другого стовпчика таблиці у першому рядку;
- повторна операція читання всіх стовпчиків першого рядку таблиці;
- операція фіксації всіх виконаних операцій."
- 
![2 3 3](https://github.com/oleksandrblazhko/ai222-lyaskovskij/assets/127392217/2a78d0da-b91a-4091-b369-7d5924b81b24)

![2 3 3(1)](https://github.com/oleksandrblazhko/ai222-lyaskovskij/assets/127392217/547c50da-6527-4028-88d4-94865f3084e7)

Рис. 8 - фрагмент екрану з рiшення "2.3.2 У двох псевдотерміналах виконати операції транзакцій при їх
квазіпаралельному режимі роботи за умови, що одна з транзакція стартує першою."

![2 3 4](https://github.com/oleksandrblazhko/ai222-lyaskovskij/assets/127392217/aaadfa2a-e643-4e6f-8938-c5bdebbb999c)

Рис. 9 - фрагмент екрану з рiшення "2.3.3 Повторити роботу транзакцій, але у першій транзакції замість операції
фіксації виконати операцію відміни всіх операцій транзакції."

![2 3 5](https://github.com/oleksandrblazhko/ai222-lyaskovskij/assets/127392217/eaba8d66-9e44-4976-ae82-baecea3ac820)

Рис. 10 - фрагмент екрану з рiшення "2.3.4 Створити файл з назвою за шаблоном «ваше прізвище_transaction_lock_2.sql»,
наприклад, blazhko_transaction_lock_2.sql, зі змістом файлу, створеного у пункті 2.3.1, але
вже враховуючи протокол 2-го ступеня блокування."

![2 3 5(1)](https://github.com/oleksandrblazhko/ai222-lyaskovskij/assets/127392217/8e1783b5-780e-4b70-90f9-37b8510db355)

Рис. 11 - фрагмент екрану з рiшення "2.3.5 Повторити роботу транзакцій з використанням протоколу 2-го ступеня
блокування, але з додатковим параметром NOWAIT."

### 2.4 Керування квазіпаралельним виконанням транзакцій при наявності Deadlock-станів.

![2 4 1](https://github.com/oleksandrblazhko/ai222-lyaskovskij/assets/127392217/d0477a18-80b5-4f79-822d-be80c95f45d0)

Рис. 12 - фрагмент екрану з рiшення "2.4.1 Створити файл з назвою за шаблоном «ваше прізвище_deadlock.sql»,
наприклад, blazhko_deadlock.sql, зі змістом файлу, створеного у пункті 2.3.1, але вже
модифікованого так, щоб транзакції призводили до Deadlock-стану."

![Снимок экрана 2023-05-24 125152](https://github.com/oleksandrblazhko/ai222-lyaskovskij/assets/127392217/22211732-512d-45b6-925a-267eac61aa3b)

Рис. 13 - фрагмент екрану з рiшення "2.4.2 Виконати модифіковані транзакції. Проаналізувати реакцію СКБД на операцію зміни значення стовпчика для транзакції, яка виконувалася пізніше (призвела до Deadlock-стану), та надати висновки за результатами аналізу з урахуванням ідентифікаторів процесів та номерів транзакцій."
